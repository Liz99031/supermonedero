---
layout: cards
---

<script type="text/javascript" src="/js/jquery-1.11.2.min.js"></script>
<script type="text/javascript" src="/js/url.min.js"></script>
<script type="text/javascript" src="/js/sheetrock.min.js"></script>

<div class="row">
  <div class="col-sm-3" style="height: 100%; ">
    <h4>Categories</h4>
    <div class="list-group">
      <a href="javascript:void(0);" id="category-rewards" class="list-group-item"><i class="fa fa-trophy" aria-hidden="true"></i>Rewards</a>
      <a href="javascript:void(0);" id="category-cashback" class="list-group-item"><i class="fa fa-money" aria-hidden="true"></i>Cash Back</a>
      <a href="javascript:void(0);" id="category-travel" class="list-group-item"><i class="fa fa-plane" aria-hidden="true"></i>Travel</a>
      <a href="javascript:void(0);" id="category-lowinterest" class="list-group-item"><i class="fa fa-percent" aria-hidden="true"></i>Low Interest</a>
      <a href="javascript:void(0);" id="category-student" class="list-group-item"><i class="fa fa-graduation-cap" aria-hidden="true"></i>Student</a>
    </div>

    <h4>Credit Score</h4>
    <div class="list-group">
      <a href="javascript:void(0);" id="score-excellent" class="list-group-item">Excellent</a>
      <a href="javascript:void(0);" id="score-good" class="list-group-item">Good</a>
      <a href="javascript:void(0);" id="score-average" class="list-group-item">Average</a>
      <a href="javascript:void(0);" id="score-poor" class="list-group-item">Poor</a>
    </div>
    <div class="text-center">
      <a id="clickme" class="btn btn-info" type="submit">Get Your Free Credit Card Score</a>
    </div>

    <h4>Fees</h4>
    <div class="checkbox checkbox-primary">
      <input type="checkbox" id="check-no-fee">
      <label for="check-no-fee">No Annual Fee</label>
    </div>
    <div class="checkbox checkbox-primary">
      <input type="checkbox" id="check-no-balance-transfer-fee">
      <label for="check-no-balance-transfer-fee">No Balance Transfer Fee</label>
    </div>
    <div class="checkbox checkbox-primary">
      <input type="checkbox" id="check-no-foreign-fee">
      <label for="check-no-foreign-fee">No Foreign Transaction Fee</label>
    </div>

    <h4>Options</h4>
    <div class="checkbox checkbox-primary">
      <input type="checkbox" id="check-latino-friendly">
      <label for="check-latino-friendly">Latino Friendly</label>
    </div>
  </div>

  <div class="col-sm-9">
    <div id="loading-message" class="text-center"><img src="https://s-media-cache-ak0.pinimg.com/originals/0c/0e/aa/0c0eaa265be5c74d3d25f87f8bcc87e0.gif" width="300" /></div>
    <div id="page-header"></div>
    <div id="cards-table"></div>
  </div>
</div>

<div id="footer-compare"></div>

<script type="text/javascript">
  $(document).ready(function() {
    var sheetUrl = "https://docs.google.com/spreadsheets/d/14nDVwVvubdeUDVDRKxkq1P5hgaqUNk_k1ekHLKyqooY/edit#gid=0";

    var category = null;
    var score = null;
    var latinoFriendly = false;
    var noFee = false;
    var noBalanceTransferFee = false;
    var noForeignFee = false;

    var pageData = {
      'rewards': [
        'Rewards Credit Cards',
        'Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.'
      ],
      'cashback': [
        'Cash Back Credit Cards',
        'Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.'
      ],
      'travel': [
        'Travel Credit Cards',
        'Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.'
      ],
      'lowinterest': [
        'Low Interest Credit Cards',
        'Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.'
      ],
      'student': [
        'Student Credit Cards',
        'Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.'
      ]
    };

    loadData();
    updateView();
    loadCardsTable();

    $("a[id*='category-']").click(function() {
      updateSelection(this.id);
    });
    $("a[id*='score-']").click(function() {
      updateSelection(this.id);
    });
    $("input[id*='check-']").click(function() {
      updateSelection(this.id);
    });

    function updateView() {
      $("a[id*='category']").removeClass('active');
      $("a[id*='score']").removeClass('active');
      $("input[id*='check-']").prop('checked', false);

      $('#category-' + category).addClass('active');
      $('#score-' + score).addClass('active');
      $('#check-latino-friendly').prop('checked', latinoFriendly);
      $('#check-no-fee').prop('checked', noFee);
      $('#check-no-balance-transfer-fee').prop('checked', noBalanceTransferFee);
      $('#check-no-foreign-fee').prop('checked', noForeignFee);

      $('#page-header').empty();
      $('#cards-table').empty().data('sheetrockLoaded', false);
    }

    function loadData() {
      category        = url('?category') != 'undefined' ? url('?category') : category = 'improve';
      score           = url('?score') != 'undefined' ? url('?score') : score = 'excellent';
      latinoFriendly  = getBoolean('?latino_friendly');
      noFee           = getBoolean('?no_fee');
      noBalanceTransferFee = getBoolean('?no_balance_transfer_fee');
      noForeignFee    = getBoolean('?no_foreign_fee');
    }

    function getBoolean(name) {
      var retval = 'undefined';
      if (url(name) != 'undefined') {
        retval = url(name) == '1';
      }
      return retval;
    }

    function updateSelection(id) {
      var type = id.split('-')[0];
      var value = id.substring(id.indexOf('-') + 1)

      switch (type) {
        case 'category':
          category = value;
          break;
        case 'score':
          score = value;
          break;
        case 'check':
          switch (value) {
            case 'latino-friendly':
              latinoFriendly = $('#' + id).prop('checked');
              break;
            case 'no-fee':
              noFee = $('#' + id).prop('checked');
              break;
            case 'no-balance-transfer-fee':
              noBalanceTransferFee = $('#' + id).prop('checked');
              break;
            case 'no-foreign-fee':
              noForeignFee = $('#' + id).prop('checked');
              break;
          }
          break;
      }
      updateView();
      loadCardsTable();
    }

    function loadCardsTable() {
      var pageHeaderTemplateHtml =
        "<h1>%%page_title%%</h1>\
        <p class='post-meta'>%%page_subtitle%%</p>";

      var cardTemplateHtml =
        "<table class='table card shadow'>\
          <tbody>\
            <tr>\
              <td colspane='2' width='75%'><h3>%%card_name%%</h3></td>\
              <td rowspan='4'>\
                <table class='table borderless card-actions'>\
                  <tr><td><img class='img-responsive' src='%%card_image_url%%' /></td></tr>\
                  <tr><td><a href='%%card_apply_now_url%%' target='_blank' class='btn btn-success' type='submit'>Apply Now</a></td></tr>\
                  <tr><td><a href='javascript:void(0);' class='btn btn-info' type='submit'>View Details</a></td></tr>\
                </table>\
              </td>\
            </tr>\
            <tr><td>Annual Fee: <strong>%%card_annual_fee%%</strong><br />\
            Rewards rate: <strong>%%card_rewards_rate%%</strong></td></tr>\
            <tr><td><p>%%card_details%%</p></td></tr>\
            <tr>\
              <td>\
                <div class='checkbox checkbox-primary'>\
                  <input type='checkbox' id='compare-card-%%card_id%%'>\
                  <label for='compare-card-%%card_id%%' class='small text-uppercase'>Compare this card</label>\
                </div>\
              </td>\
            </tr>\
          </tbody>\
        </table>";

      $('#loading-message').show();
      var cardsHtml = '';
      sheetrock({
        url: sheetUrl,
        query: generateQuery(),
        reset: true,
        callback: function(error, options, response) {
          if (!error) {
            console.log(response.rows.length);
            if(response.rows.length > 1) {  // Because it always returns the first row
              rowNumber = 0;
              response.rows.forEach(function(item) {
                if(rowNumber > 0) {
                  cardsHtml += fillCardTable(cardTemplateHtml, item.cellsArray);
                }
                else {
                  rowNumber = 1;
                }
              });
            }
            else {
              cardsHtml = "<h3>No Results</h3><p>We currently don't have an offer that matches that criteria.</p>";
            }
            $('#loading-message').hide();
            $('#page-header').html(fillPageData(pageHeaderTemplateHtml, pageData[category]));
            $('#cards-table').append(cardsHtml);
          }
        }
      });
    }

    function fillPageData(html, values) {
      html = html.replace('%%page_title%%', values[0]);
      html = html.replace('%%page_subtitle%%', values[1]);
      return html;
    }

    function fillCardTable(html, values) {
      html = html.replace(/%%card_id%%/g, values[0]);
      html = html.replace(/%%card_name%%/g, values[1]);
      html = html.replace(/%%card_rewards_rate%%/g, values[2]);
      html = html.replace(/%%card_annual_fee%%/g, values[3]);
      html = html.replace(/%%card_image_url%%/g, values[4]);
      html = html.replace(/%%card_apply_now_url%%/g, values[5]);
      return html;
    }

    function generateQuery() {
      whereCategory = '';
      switch(category) {
        case 'rewards':
          whereCategory = 'F = "Y" ';
          break;
        case 'cashback':
          whereCategory = 'G = "Y" ';
          break;
        case 'travel':
          whereCategory = 'H = "Y" ';
          break;
        case 'lowinterest':
          whereCategory = 'I = "Y" ';
          break;
        case 'student':
          whereCategory = 'J = "Y" ';
          break;
      }

      whereScore = 'P LIKE "%' + score + '%" ';

      query  = 'SELECT A, B, T, Q, X, Y ';
      query += 'WHERE ' + whereCategory + 'AND ' + whereScore;
      query += 'ORDER BY A';
      console.log(query);
      return query;
    }
  });

      $( "#clickme" ).click(function() {
      $( "#footer-compare" ).slideDown( "slow", function() {
        // Animation complete.
      });
    });
</script>

<style type="text/css">
  i.fa {
    margin-right: 10px !important;
  }

  table.card label,
  button.btn,
  a.btn {
    font-family: 'Open Sans', 'Helvetica Neue', Helvetica, Arial, sans-serif;
  }

  table.shadow {
    box-shadow: 0px 1px 2px #888888;
  }

  .borderless td,
  .borderless th {
    border: none;
  }

  table.card-actions {
    width: 100%;
  }

  table.card-actions tr,
  table.card-actions tr td {
    border: none !important;
  }

  table.card-actions tr td {
    background: white !important;
    text-align: center !important;
  }

  #footer-compare {
    position:fixed;
    left:0px;
    bottom:0px;
    height:40px;
    width:100%;
    background:#337ab7;
    z-index: 1000;
    display: none;
  }

  #loading-message {
    display: none;
  }
</style>