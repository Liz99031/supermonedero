---
layout: cards
---

<script type='text/javascript' src='/js/jquery-1.11.2.min.js'></script>
<script type='text/javascript' src='/js/url.min.js'></script>
<script type='text/javascript' src='/js/sheetrock.min.js'></script>
<script type='text/javascript' src='/js/tableHeadFixer.js'></script>
<script type="text/javascript" src="/js/credit-cards-common.js"></script>

<link rel="stylesheet" type="text/css" href="/css/credit-cards-compare.css">

<div class='outer'>

  <div class='scrollable' style="margin: auto; width: 90%;">
    <table id='card-compare'>
      <tbody>
        <tr><td>Your Selected Cards</td></tr>
        <tr><td>Recommended Credit Score</td></tr>
        <tr><td>Annual Fee</td></tr>
        <tr><td>Great for</td></tr>
        <tr><td>Rewards</td></tr>
        <tr><td>APR</td></tr>
        <tr><td>Bonus Offer</td></tr>
        <tr><td>Pros</td></tr>
        <tr><td>Cons</td></tr>
      </tbody>
    </table>
  </div>
</div>


<script type='text/javascript'>
  var sheetUrl = "https://docs.google.com/spreadsheets/d/14nDVwVvubdeUDVDRKxkq1P5hgaqUNk_k1ekHLKyqooY/edit#gid=0";

  $(document).ready(function () {
    var cardsToCompare = [];
    var cardsData = [];

    loadData();
    if (cardsToCompare.length == 0) {
      location.href = '/credit-cards-list.html';
    }

    loadCardsData();

    // Because it is async
    var timer = setInterval(function () {
      if (cardsData.length == cardsToCompare.length) {
        clearInterval(timer);
        loadPageData();
      }
    }, 100);

    $('#card-compare').tableHeadFixer({ 'left': 1 });

    function loadData() {
      var cards = url('?cards');
      if (cards) {
        cardsToCompare = cards.split('-');
      }
    }

    function loadCardsData(cardId) {
      cardsToCompare.forEach(function (cardId) {
        var query = 'SELECT * WHERE A = ' + cardId;
        sheetrock({
          url: sheetUrl,
          query: query,
          reset: true,
          callback: function (error, options, response) {
            if (!error) {
              cardsData.push(response.rows[0].cellsArray);
            }
          }
        });
      });
    }

    function loadPageData() {
      cardsData.forEach(function (card) {
        $("#card-compare tr").append("<td class='card-column'></td>");
        var column = 0;
        $("#card-compare td:last-child").each(function () {
          var cellHtml = '';
          switch(column++) {
            case 0:
              cellHtml = cardHeader(card);
              break;
            case 1:
              cellHtml = capitalizeFirstLetter(card[17]);
              break;
            case 2:
              cellHtml = card[18];
              break;
            case 3:
              cellHtml = toBullets(whatsGreatFor(card));
              break;
            case 4:
              cellHtml = card[21];
              break;
            case 5:
              cellHtml = card[16];
              break;
            case 6:
              cellHtml = card[22];
              break;
            case 7:
              cellHtml = toBullets(card[28]);
              break;
            case 8:
              cellHtml = toBullets(card[29]);
              break;
          }
          $(this).html(cellHtml);
        });
      });
    }

    function cardHeader(data) {
      html =
        "<img class='img-responsive' src='%%card_image_url%%' />\
        <h4 class='card-name'>%%card_name%%</h4>\
        <a href='%%card_apply_now_url%%' target='_blank' class='btn btn-success'>Apply Now</a></td>\
        ";
      return replaceTags(html, data);
    }

    function whatsGreatFor(data) {
      var categories = '';
      if(data[6] == 'Y') {
        categories += 'Rewards;';
      }
      if(data[7] == 'Y') {
        categories += 'Cash Back;';
      }
      if(data[8] == 'Y') {
        categories += 'Travel;';
      }
      if(data[9] == 'Y') {
        categories += 'Low Interest;';
      }
      if(data[10] == 'Y') {
        categories += 'Students;';
      }
      if(data[11] == 'Y') {
        categories += 'Improve Score;';
      }
      return categories;
    }

    function replaceTags(html, data) {
      html = html.replace(/%%card_id%%/g, data[0]);
      html = html.replace(/%%card_name%%/g, data[1]);
      html = html.replace(/%%card_details%%/g, data[4]);
      html = html.replace(/%%card_rewards_rate%%/g, data[21]);
      html = html.replace(/%%card_annual_fee%%/g, data[18]);
      html = html.replace(/%%card_image_url%%/g, data[25]);
      html = html.replace(/%%card_apply_now_url%%/g, data[26]);
      html = html.replace(/%%card_introductory_apr%%/g, data[15]);
      html = html.replace(/%%card_introductory_reward%%/g, data[22]);
      html = html.replace(/%%card_apr%%/g, data[16]);
      html = html.replace(/%%card_balance_transfer_fee%%/g, data[19]);
      html = html.replace(/%%card_foreign_transaction_fee%%/g, data[20]);
      html = html.replace(/%%card_pros%%/g, toBullets(data[28]));
      html = html.replace(/%%card_cons%%/g, toBullets(data[29]));

      if (data[5] == 'Y') {
        html = html.replace(/%%card_div_seal%%/g, "<div id='card-seal-%%card_id%%' class='card-seal'></div>");
      } else {
        html = html.replace(/%%card_div_seal%%/g, '');
      }
      return html;
    }

  });

</script>

<style type="text/css">
  .card-column {
    min-width: 250px;
    max-width: 250px;
    min-height: 100px;
    height: 100px;
    text-align: center;
    vertical-align: top;
  }

  .card-name {
    min-height: 60px;
  }
</style>